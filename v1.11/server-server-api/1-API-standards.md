# 1. API 標準

Matrix 中伺服器-伺服器通訊的強制基線是通過 HTTPS API 交換 JSON 對象。
未來可能會指定更高效的傳輸方式作為可選擴展。

所有 `POST` 和 `PUT` 端點要求請求伺服器提供包含（可能是空的）JSON 對象的請求主體。
請求伺服器應該為所有包含 JSON 主體的請求提供 `Content-Type` 標頭為 `application/json`，
但這不是強制要求。

同樣，本規範中的所有端點要求目標伺服器返回 JSON 對象。
伺服器必須在所有 JSON 回應中包含 `Content-Type` 標頭為 `application/json`。

所有 JSON 數據，
無論是請求還是回應，
必須使用 UTF-8 編碼。

## 1.1 TLS

伺服器-伺服器通訊必須通過 HTTPS 進行。

目標伺服器必須提供由已知證書授權機構簽署的 TLS 證書。

請求伺服器最終負責確定受信任的證書授權機構，
但強烈建議依賴操作系統的判斷。
伺服器可以為管理員提供覆蓋受信任機構列表的方法。
為了測試或在其他地方進行驗證的網絡中，
例如 `.onion` 地址，伺服器可以跳過特定域或網段的證書驗證。

伺服器應在可能的情況下尊重 SNI：應為預期的證書發送 SNI，
除非預期的證書是一個 IP 地址，
這種情況下不支援 SNI 且不應發送。

鼓勵伺服器使用 [證書透明度](https://www.certificate-transparency.org/) 項目。

## 1.2 不支援的端點

如果收到對不支援（或未知）端點的請求，
伺服器必須回應 404 `M_UNRECOGNIZED` 錯誤。

同樣，405 `M_UNRECOGNIZED` 錯誤用於表示對已知端點的不支援方法。
