
# 7. Room State Resolution

房間的*狀態*是一個 `(event_type, state_key)` 到 `event_id` 的映射。每個房間從空狀態開始，每個被接受進房間的狀態事件都會更新該房間的狀態。

當每個事件只有一個 `prev_event` 時，每個事件之後的房間狀態是明確的。然而，當事件圖中的兩個分支合併時，這些分支的狀態可能會有所不同，因此必須使用*狀態解析*算法來確定最終的狀態。

例如，考慮以下事件圖（最舊的事件 E0 在頂部）：

```text
  E0
  |
  E1
 /  \
E2  E4
|    |
E3   |
 \  /
  E5
```

假設 E3 和 E4 都是 `m.room.name` 事件，設置了房間的名稱。在 E5 時，房間的名稱應該是什麼？

用於狀態解析的算法取決於房間版本。關於每個房間版本的算法描述，請參見[房間版本規範](/v1.11/rooms)。
